(function(){define(["jquery-private","knockout","gcviz-func","dijit/form/HorizontalSlider","dijit/form/RadioButton","jqueryui"],function(b,d,f,e,c){var a=[];d.bindingHandlers.tooltip={init:function(j,k){var i=d.utils.unwrapObservable(k()),h={},g=b(j);d.utils.extend(h,d.bindingHandlers.tooltip.options);d.utils.extend(h,i);g.attr("title",h.content);g.tooltip(h);d.utils.domNodeDisposal.addDisposeCallback(j,function(){g.tooltip("destroy")})},options:{show:{effect:"slideDown",delay:1000},hide:{effect:"slideUp",delay:100},position:{my:"right+30 top+5"},tooltipClass:"gcviz-tooltip",trigger:"hover, focus"}};d.bindingHandlers.wcag={init:function(j,l,m,h){var i,g=h.mapid,k=f.getElemValueVM(g,["header"],"js");i=function(){h.isWCAG(!h.isWCAG())};k.isWCAG.subscribe(i)}};d.bindingHandlers.fullscreen={init:function(i,l,m,h){var k,g=h.mapid,j=f.getElemValueVM(g,["header"],"js");k=function(n){if(n){h.enterFullscreen(j.widthSection,j.heightSection)}else{h.exitFullscreen()}};j.isFullscreen.subscribe(k)}};d.bindingHandlers.insetVisibility={init:function(i,k,l,h){var m,g=h.mapid,j=f.getElemValueVM(g,["header"],"js");j.isInsetVisible.subscribe(m);m=function(n){h.setVisibility(n)}}};d.bindingHandlers.enterkey={init:function(h,j,l,g){var i=j().func,k=j().keyType;d.utils.registerEventHandler(h,k,function(m){if(g[i](m.which,m.shiftKey,m.type)){m.preventDefault();return false}return true})}};d.bindingHandlers.buttonBlur={init:function(g){a.push(g);d.utils.registerEventHandler(g,"mouseover",function(){var h=a.length;while(h--){b(a[h]).blur()}})}};d.bindingHandlers.HorizontalSliderDijit={init:function(h,m,l,n,i){var o=m(),g=n.id,k;function j(p,q){if(p.items.length>0){Object.keys(p.items).forEach(function(r){j(p.items[r],q,j)})}else{i.$root.changeServiceOpacity(p.id,q)}}if(o.enable){b(h).attr("Visible",o.visible);k=new e({name:"slider",minimum:o.extent[0],maximum:o.extent[1],intermediateChanges:true,value:o.value,showButtons:false}).placeAt(h);if(n.items.length===0){i.$root.changeServiceOpacity(g,o.value)}else{j(n,o.value,j)}dojo.addClass(k.domNode,"gcviz-leg-slider");k.on("Change",function(p){if(n.items.length===0){i.$root.changeServiceOpacity(g,p)}else{j(n,p,j)}})}}};d.bindingHandlers.legendItemList={init:function(j,k,l,i){var h=k(),g=b(j);if(i.items.length>0){g.children("div#childItems.gcviz-legendHolderDiv").toggle(h.expanded,function(m){m.stopPropagation()})}else{g.children(".gcviz-legendSymbolDiv").toggle(h.expanded);g.children("div#customImage.gcviz-legendHolderImgDiv").toggle(h.expanded)}if(i.displaychild.enable===false&&i.customimage.enable===false){g.css("background-image","none")}return false}};d.bindingHandlers.LegendRadioButtons={init:function(j,k,m,i,g){var h=k(),l;l=new c({name:h.group,value:h.value,checked:h.value}).placeAt(j);l.on("Change",function(n){g.$root.switchRadioButtonVisibility(g.$root.mymap,g.$data,n)})}};d.observableArray.fn.uniqueArray=function(){var g=this;d.computed(function(){var l,h,m,j=g(),k=[],i=j.length;for(h=0;h<i;h++){l=undefined;for(m=0;m<k.length;m++){if(j[h]===k[m]){l=true;break}}if(!l){k.push(j[h])}}return g(k)}).extend({notify:"always"});return g};d.bindingHandlers.uiDialog={init:function(h,j,i,m){var l,k=d.utils.unwrapObservable(j()),o={},n=b(h),g=d.bindingHandlers.uiDialog.options;b.extend(true,o,g);d.utils.extend(o,k);if(typeof o.ok!=="undefined"){o.buttons[0].click=o.ok}if(typeof o.cancel!=="undefined"){o.buttons[1].click=o.cancel}else{o.buttons.pop()}if(typeof o.close!=="undefined"){o.close=o.close}n.dialog(o);l=function(p){n.dialog(p?"open":"close")};m[k.openDialog].subscribe(l);d.utils.domNodeDisposal.addDisposeCallback(h,function(){n.dialog("destroy")})},options:{autoOpen:false,modal:true,resizable:false,draggable:false,show:"fade",hide:"fade",closeOnEscape:true,close:function(){},buttons:[{text:"Ok",click:function(){b(this).dialog("close")}},{text:"Cancel",click:function(){b(this).dialog("close")}}]}};d.bindingHandlers.returnKey={init:function(i,j,k,h,g){d.utils.registerEventHandler(i,"keydown",function(l){if(l.keyCode===13){l.preventDefault();j().call(h,g.$data)}})}};d.extenders.numeric=function(i,h){var g=d.computed({read:i,write:function(j){var n,q,p=i(),o=h.precision,m=h.validation,r=Math.pow(10,o),k=isNaN(j)?m.min:parseFloat(+j),l=Math.round(k*r)/r;if(typeof j==="string"&&o>0){if(j.indexOf(".")===j.length-1){l=j}}if(typeof m!=="undefined"){n=(typeof m.min==="function")?m.min():m.min;q=(typeof m.max==="function")?m.max():m.max;if(l<n||l>q){b("#"+m.id).text(m.msg);l=n}else{b("#"+m.id).text("")}}if(l!==p){i(l)}else{if(j!==p){i.notifySubscribers(l)}}}}).extend({notify:"always"});g(i());return g}})}).call(this);